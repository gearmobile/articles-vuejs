https://scotch.io/tutorials/how-to-write-a-unit-test-for-vuejs

## Настройка

Процесс первоначальной настройки JavaScript-проекта может быть достаточно сложным. Ведь существует большой выбор js-библиотек, каждая из которых служит своей цели.

К счастью, при работе с фреймворком [Vue.js](https://vuejs.org/) у разработчиков есть удобный инструмент для быстрого разворачивания нового проекта - консольная утилита [vue-cli](https://github.com/vuejs/vue-cli).

Если в системе уже установлен [Node.js](https://nodejs.org/en/) и менеджер пакетов [npm](https://docs.npmjs.com/), то инсталяция vue-cli выполняется как обычный npm-пакет:

```bash
$ npm install --global vue-cli
```

Разворачивание нового проекта при помощи vue-cli выполняется командой:

```bash
$ vue init webpack new-project
```

В процессе настройки нового проекта будут заданы несколько вопросов. Некоторые из этих вопросов однозначны и можно смело выбирать опцию по-умолчанию. the only requirement is that you answer YES to including vue-router and YES to setting up unit tests with Karma and Mocha. Затем нужно перейти в директорию проекта и выполнить установку зависимостей из файла *packag.json*:

```bash
$ npm install
```

Финальная команда запустит локальный сервер и автоматически откроет браузер со домашней страницей текущео проекта:

```bash
$ npm run dev
```

Ниже представлено краткое описание ключевых зависимостей, которые устанавливает в новом проекте утилита vue-cli. Также в описании указаны версии пакетов, установленных в текущем проекте.

## Зависимости проекта

**Webpack (v2.3)** - сборщик (bundler), который занимается соединением разнообразных JavaScript, CSS и HTML файлов в единый проект, с которым может работать клиентская программа, такая как браузер.

**Babel (v6.22)** - компилятор (compiler), который преобразует ECMAScript 6 в ECMAScript 5. Современный JavaScript находится в процессе активной разработки, в нем регулярно появляются новые возможности или улучшаются старые возможности. Однако не все браузеры могут правильно "понимать" нововведения в JavaScript, поэтому компилятор Babel преобразует код на современном JavaScript в более старую версию, понятную большинству браузеров. Что дает гарантию работоспособности JavaScript-кода.

## Зависимости для целей тестирования

**Karma (v1.4)** - утилита, которая может запускать JavaScript-код в нескольких браузерах и выполнять тестирование кода в процессе его выполнения. Отсюда оригинальное название данного инструмента - *test runner*. Karma позволяет управлять процессом тестирования не только из командной строки, но и из IDE (например, [WebStorm](https://www.jetbrains.com/webstorm/)). По завершении выводятся результаты тестирования кода.

**Mocha (v3.2)** - это фреймворк под Node.js, который позволяет выполнять асинхронное тестирование (asynchronous tests) кода. Mocha поставляется с огромным количеством возможностей.

**Chai (v3.5)** - это библиотека (assertion library), в которой хранится большая коллекция разнообразных функций для проверки условий тестов.

В текущем проекте находятся такие директории, как *build*, *config*, *node_modules*, *src*, *static* и *test*. Но для целей данного обзора важны только две из них - это папка *src*, в которой расположены рабочие файлы проекта; и папка *test*.

## Первый тест

В любом начинании хорошей практикой является прием, когда все начинается с самого простого. В текущем проекте начнем с создания простого компонента, в котором представлен обычный список каких-либо элементов.

Для этого в диретории *src/components* создадим компонент *List.vue* и наполним его следующим содержимым:

```js
<template>
  <div>
    <h1>My To Do List</h1>
    </br>
    <!--displays list -->
    <ul>
      <li v-for="(item, index) in listItems" :key="index">{{ item }}</li>
    </ul>
  </div>
</template>

<script>
export default {
  name: 'list',
  data () {
    return {
      listItems: ['buy food', 'play games', 'sleep'],
    }
  }
}
</script>
```

В этом компоненте пункты меню хранятся с массиве *listItems* и являются данными компонента *List.vue*. Эти данные доступны в шаблоне, где они обрабатываютсяв цикле (директива *v-for*) и отображаются на странице.

Чтобы увидеть этот список в браузере, нужно создать новые маршрут в роутере. Для этго в файле *src/router/index.js* добавляем новый маршрут таким образом:

```js
import Vue from 'vue'
import Router from 'vue-router'
import Hello from '@/components/Hello'
import List from '@/components/List'

Vue.use(Router)

export default new Router({
  routes: [
    {
      path: '/',
      name: 'Hello',
      component: Hello
    },
    {
      path: '/to-do',
      name: 'ToDo',
      component: List
    },
  ]
})
```

В этом файле первоначально подключается новый компонент строкой *import List from '@/components/List'*, затем создается новый маршрут со свойтсвом *path: '/to-do'*.

Тпереь если в адресной строке браузера указать путь *localhost:8080/#/to-do*, то в окне браузера отобразится такая страница:

![./images/vue-test-page-01.png]

Нашей задачей является проверка того, правильно ли отображаются данные на странице. Для этого в директории *test/unit/specs* создадим новый файл *List.spec.js* и поместим в него следующий код:

```js
import List from '@/components/List';
import Vue from 'vue';

describe('List.vue', () => {

  it('displays items from the list', () => {
      // our test goes here
  })
})
```

В этом примере мы описываем (*describe*) компонент *List.vue*. Здесь мы создаем простой тест, который проверяет, отображает ли компонент пункты меню из списка. Этот файл является примером базовой структуры для тестов под Mocha.

Внутри теста нужно определить Vue-компонент, который будет тестироваться. Для этого добавим его двумя строчка внутрь теста:

```js
// build component
const Constructor = Vue.extend(List);
const ListComponent = new Constructor().$mount();
```
